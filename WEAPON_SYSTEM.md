# 武器系统配置说明

## 武器配置概览

基于《黑神话：悟空》和《西游记》原著，所有角色已配置合适的初始武器。

### 角色与武器搭配

#### 第一回 - 黑风山

- **天命人**: `golden_staff` (金箍棒) - 主角标配
- **黑熊精**: `mace` (降魔杵) - 黑熊修佛，使用佛门重器
- **灵虚子**: `golden_rope` (金绳索) - 道家法器，束缚之术
- **赤发鬼**: `fire_lance` (火尖枪) - 火属性妖怪，使用火焰武器

#### 第二回 - 黄风岭

- **黄风大王**: `wind_tamer` (定风珠) - 黄风怪的标志法宝
- **虎先锋**: `twin_blades` (双刃刀) - 虎妖快速连击
- **石先锋**: `thunder_drum` (雷公凿) - 石属性，雷霆之力
- **沙大王**: `mace` (降魔杵) - 沙僧原型，佛门武器

#### 第三回 - 小西天

- **黄眉大王**: `violet_bell` (紫金铃) - 标志性音波法宝
- **百眼魔君**: `ice_needle` (冰魄银针) - 眼睛金光如冰针
- **疯虎**: `thunder_drum` (雷公凿) - 狂暴雷电
- **亢金星君**: `golden_staff` (金箍棒) - 龙族神兵

#### 第四回 - 盘丝洞

- **紫蛛**: `ice_needle` (冰魄银针) - 蜘蛛精的银针
- **百眼道人**: `ice_needle` (冰魄银针) - 多目之光
- **金池长老**: `mace` (降魔杵) - 佛门长老禅杖
- **多目金蜈蚣**: `ice_needle` (冰魄银针) - 毒针攻击

#### 第五回 - 火焰山

- **牛魔王**: `bull_horns` (牛魔双角) - 标志性巨角
- **红孩儿**: `wind_fire_wheels` (风火轮) - 三昧真火和风火轮
- **罗刹女**: `plantain_fan` (芭蕉扇) - 铁扇公主的法宝
- **夜叉王**: `thunder_drum` (雷公凿) - 雷电之力

#### 第六回 - 须弥山

- **二郎神**: `twin_blades` (双刃刀) - 代表三尖两刃刀
- **齐天大圣**: `ruyi_staff` (如意金箍棒) - 终极形态
- **金蝉子**: `mace` (降魔杵) - 唐僧禅杖
- **石猴**: `ruyi_staff` (如意金箍棒) - 悟空本体

---

## 武器详细配置

### 基础武器 (Common)

- **金箍棒** (`golden_staff`)
  - 伤害: 15 | 攻速: 1000ms
  - 描述: 天命人的如意神兵，可大可小，重达一万三千五百斤
  - 攻击逻辑: 自动追踪最近敌人，发射穿透弹幕

### 稀有武器 (Rare)

- **火尖枪** (`fire_lance`)
  - 伤害: 20 | 攻速: 1200ms
  - 攻击逻辑: 发射火焰弹幕，造成灼烧效果

- **避火罩** (`fireproof_cloak`)
  - 伤害: 10 | 攻速: 3000ms
  - 攻击逻辑: 环绕玩家旋转的护盾球体，接触伤害

- **双刃刀** (`twin_blades`)
  - 伤害: 18 | 攻速: 800ms
  - 攻击逻辑: 快速近战斩击，扇形范围攻击

- **雷公凿** (`thunder_drum`)
  - 伤害: 22 | 攻速: 1600ms
  - 攻击逻辑: 召唤雷电链式攻击多个敌人

- **冰魄银针** (`ice_needle`)
  - 伤害: 16 | 攻速: 900ms
  - 攻击逻辑: 快速发射多枚冰针，冰冻敌人

- **金绳索** (`golden_rope`)
  - 伤害: 12 | 攻速: 1400ms
  - 攻击逻辑: 束缚敌人，造成持续伤害并减速

### 史诗武器 (Epic)

- **定风珠** (`wind_tamer`)
  - 伤害: 25 | 攻速: 2000ms
  - 攻击逻辑: 召唤风暴，大范围AOE攻击

- **紫金铃** (`violet_bell`)
  - 伤害: 30 | 攻速: 1500ms
  - 攻击逻辑: 发出音波，范围震慑敌人

- **降魔杵** (`mace`)
  - 伤害: 35 | 攻速: 1800ms
  - 攻击逻辑: 重击地面，产生冲击波

- **牛魔双角** (`bull_horns`)
  - 伤害: 40 | 攻速: 2500ms
  - 攻击逻辑: 冲锋攻击，击退并穿透敌人

- **风火轮** (`wind_fire_wheels`)
  - 伤害: 28 | 攻速: 1000ms
  - 攻击逻辑: 环绕玩家的火焰轮，持续伤害

### 传说武器 (Legendary)

- **如意金箍棒** (`ruyi_staff`)
  - 伤害: 50 | 攻速: 800ms
  - 攻击逻辑: 强力穿透攻击，可变大范围横扫

- **玉净瓶** (`jade_purity_bottle`)
  - 伤害: 32 | 攻速: 2200ms
  - 攻击逻辑: 吸收敌人并造成大范围净化伤害

- **芭蕉扇** (`plantain_fan`)
  - 伤害: 45 | 攻速: 3000ms
  - 攻击逻辑: 巨大扇风攻击，推开并伤害所有敌人

### 扩展武器

- **三尖两刃刀** (`three_pointed_blade`)
  - 伤害: 42 | 攻速: 1100ms | 品质: 传说
  - 描述: 二郎神的神兵，三尖锋利，刀刃如电
  - 攻击逻辑: 三叉斩击，120度扇形攻击，升级后增至5叉

- **九环锡杖** (`nine_ring_staff`)
  - 伤害: 30 | 攻速: 1700ms | 品质: 史诗
  - 描述: 唐僧的禅杖，九环鸣响，震慑妖魔
  - 攻击逻辑: 范围音波攻击，造成伤害并眩晕减速敌人

- **月牙铲** (`crescent_blade`)
  - 伤害: 33 | 攻速: 1500ms | 品质: 史诗
  - 描述: 沙僧的降妖宝杖，月牙如钩，破甲无双
  - 攻击逻辑: 回旋镖式攻击，发射后会返回，可多次命中

- **混铁棍** (`iron_cudgel`)
  - 伤害: 38 | 攻速: 2200ms | 品质: 史诗
  - 描述: 牛魔王的巨棍，重逾千斤，力拔山兮
  - 攻击逻辑: 重击地面产生巨大冲击波，强力击退敌人

- **七星剑** (`seven_star_sword`)
  - 伤害: 24 | 攻速: 持续 | 品质: 稀有
  - 描述: 道家仙剑，七星连珠，剑气纵横
  - 攻击逻辑: 环绕玩家的剑阵，3-7把剑持续旋转攻击

- **人参果** (`ginseng_fruit`)
  - 伤害: 15 | 攻速: 5000ms | 品质: 传说
  - 描述: 镇元大仙的仙果，闻一闻活三百六十岁，吃一个活四万七千年
  - 攻击逻辑: 治疗玩家生命值，提升最大生命，对周围敌人造成仙气伤害

### 高级扩展武器

- **乾坤圈** (`heaven_earth_circle`)
  - 伤害: 40 | 攻速: 1800ms | 品质: 传说
  - 描述: 哪吒的神器，金光万丈，飞出攻击后自动返回
  - 攻击逻辑: 飞出直线攻击，自动追踪返回玩家，双程伤害

- **混天绫** (`red_armillary_sash`)
  - 伤害: 28 | 攻速: 1400ms | 品质: 史诗
  - 描述: 哪吒的法宝，长达七尺二寸，束缚和鞭打攻击
  - 攻击逻辑: 扇形鞭打攻击，命中敌人减速束缚

- **紫金葫芦** (`purple_gold_gourd`)
  - 伤害: 35 | 攻速: 3500ms | 品质: 传说
  - 描述: 金角银角的法宝，呼名答应，吸收敌人
  - 攻击逻辑: 范围吸引敌人，延迟后爆发伤害

- **幌金绳** (`golden_rope_immortal`)
  - 伤害: 26 | 攻速: 1600ms | 品质: 史诗
  - 描述: 太上老君的法宝，束缚更强版本，捆仙索
  - 攻击逻辑: 链接多个敌人，强力束缚并持续伤害

- **照妖镜** (`demon_revealing_mirror`)
  - 伤害: 18 | 攻速: 2500ms | 品质: 稀有
  - 描述: 识破敌人弱点，大幅增加暴击率和暴击伤害
  - 攻击逻辑: 范围识破弱点，60%暴击率，1.5-2.5倍暴击伤害

- **定海神针** (`sea_calming_needle`)
  - 伤害: 55 | 攻速: 2000ms | 品质: 传说
  - 描述: 金箍棒的另一形态，天河镇海之宝，范围更大威力更强
  - 攻击逻辑: 巨大范围横扫，180度扇形攻击，强力击飞

### 未来扩展武器

- **八卦炉** (`eight_trigrams_furnace`)
  - 伤害: 32 | 攻速: 2800ms | 品质: 传说
  - 描述: 太上老君的炼丹炉，八卦烈焰，持续灼烧敌人
  - 攻击逻辑: 八个方位火焰柱，范围持续灼烧伤害

- **盘龙杖** (`dragon_staff`)
  - 伤害: 36 | 攻速: 2300ms | 品质: 史诗
  - 描述: 观音座下的神兵，召唤龙卷风暴，席卷群敌
  - 攻击逻辑: 生成龙卷风，持续伤害并拉扯敌人

- **七宝妙树** (`seven_treasure_tree`)
  - 伤害: 38 | 攻速: 3200ms | 品质: 传说
  - 描述: 准提道人的法宝，刷新万物，净化邪祟
  - 攻击逻辑: 七色光芒扁形攻击，净化范围内敌人

- **斩仙飞刀** (`immortal_slaying_blade`)
  - 伤害: 48 | 攻速: 4000ms | 品质: 传说
  - 描述: 陆压道人的飞刀，锁定必杀，请宝贝转身
  - 攻击逻辑: 锁定血量最高敌人，追踪必杀

- **金刚琢** (`diamond_snare`)
  - 伤害: 34 | 攻速: 1900ms | 品质: 史诗
  - 描述: 太上老君的法宝，破防神器，无坚不催
  - 攻击逻辑: 发射破甲弹幕，无视50%-100%防御

- **玲珑宝塔** (`exquisite_pagoda`)
  - 伤害: 40 | 攻速: 3600ms | 品质: 传说
  - 描述: 托塔天王李靖的宝塔，镇压万魔，禁锢邪祟
  - 攻击逻辑: 地面宝塔镇压，禁锢敌人并持续伤害

---

## 武器合成配方

基于《西游记》原著和游戏设定，武器可通过合成获得更强力的武器：

### 传说武器合成

1. **如意金箍棒** (`ruyi_staff`)
   - 材料: 金箍棒 + 雷公凿 + 降魔杵
   - 理由: 天地神兵，需要强力武器融合

2. **玉净瓶** (`jade_purity_bottle`)
   - 材料: 紫金铃 + 定风珠 + 避火罩
   - 理由: 观音法宝，需要多种神器力量

3. **芭蕉扇** (`plantain_fan`)
   - 材料: 定风珠 + 火尖枪 + 牛魔双角
   - 理由: 铁扇公主和牛魔王相关，风火之力

4. **八卦炉** (`eight_trigrams_furnace`)
   - 材料: 紫金铃 + 火尖枪 + 降魔杵
   - 理由: 太上老君炼丹炉，音波、火焰、佛力融合

5. **七宝妙树** (`seven_treasure_tree`)
   - 材料: 玉净瓶 + 紫金铃 + 定风珠
   - 理由: 准提道人法宝，需多种神器

6. **斩仙飞刀** (`immortal_slaying_blade`)
   - 材料: 三尖两刃刀 + 如意金箍棒
   - 理由: 陆压道人神器，需极强神兵

7. **玲珑宝塔** (`exquisite_pagoda`)
   - 材料: 玉净瓶 + 降魔杵 + 九环锡杖
   - 理由: 托塔天王镇压之宝，佛法神器

### 史诗武器合成

4. **风火轮** (`wind_fire_wheels`)
   - 材料: 火尖枪 + 定风珠
   - 理由: 哪吒/红孩儿的风火之力

5. **紫金铃** (`violet_bell`)
   - 材料: 金绳索 + 雷公凿
   - 理由: 黄眉大王法宝，束缚和音波之力

6. **牛魔双角** (`bull_horns`)
   - 材料: 降魔杵 + 火尖枪
   - 理由: 牛魔王的力量和火焰

### 稀有武器合成

7. **冰魄银针** (`ice_needle`)
   - 材料: 金绳索 + 双刃刀
   - 理由: 快速精准攻击

8. **雷公凿** (`thunder_drum`)
   - 材料: 双刃刀 + 金绳索
   - 理由: 快速攻击转化为雷电之力

### 扩展武器合成

9. **三尖两刃刀** (`three_pointed_blade`)
   - 材料: 双刃刀 + 金箍棒
   - 理由: 神兵合璧，二郎神专属

10. **九环锡杖** (`nine_ring_staff`)
    - 材料: 降魔杵 + 金绳索
    - 理由: 佛门法器，禅杖进化

11. **月牙铲** (`crescent_blade`)
    - 材料: 降魔杵 + 双刃刀
    - 理由: 沙僧破甲利器

12. **混铁棍** (`iron_cudgel`)
    - 材料: 牛魔双角 + 降魔杵
    - 理由: 力量型武器的终极形态

13. **七星剑** (`seven_star_sword`)
    - 材料: 金绳索 + 冰魄银针
    - 理由: 道家剑气，精准快速

### 高级扩展武器合成

14. **乾坤圈** (`heaven_earth_circle`)
    - 材料: 金箍棒 + 火尖枪
    - 理由: 哪吒神器，神兵合璧

15. **混天绫** (`red_armillary_sash`)
    - 材料: 金绳索 + 风火轮
    - 理由: 哪吒法宝，束缚和火焰

16. **紫金葫芦** (`purple_gold_gourd`)
    - 材料: 玉净瓶 + 金绳索
    - 理由: 吸收法宝的进化

17. **幌金绳** (`golden_rope_immortal`)
    - 材料: 金绳索 + 九环锡杖
    - 理由: 太上老君的捆仙索

18. **照妖镜** (`demon_revealing_mirror`)
    - 材料: 七星剑 + 冰魄银针
    - 理由: 识破弱点，精准打击

19. **定海神针** (`sea_calming_needle`)
    - 材料: 如意金箍棒 + 牛魔双角
    - 理由: 金箍棒的终极形态

20. **八卦炉** (`eight_trigrams_furnace`)
    - 材料: 紫金铃 + 火尖枪 + 降魔杵
    - 理由: 太上老君炼丹炉

21. **盘龙杖** (`dragon_staff`)
    - 材料: 降魔杵 + 定风珠
    - 理由: 观音神兵，龙卷风暴

22. **七宝妙树** (`seven_treasure_tree`)
    - 材料: 玉净瓶 + 紫金铃 + 定风珠
    - 理由: 准提道人法宝

23. **斩仙飞刀** (`immortal_slaying_blade`)
    - 材料: 三尖两刃刀 + 如意金箍棒
    - 理由: 陆压道人神器

24. **金刚琢** (`diamond_snare`)
    - 材料: 牛魔双角 + 雷公凿
    - 理由: 太上老君破防神器

25. **玲珑宝塔** (`exquisite_pagoda`)
    - 材料: 玉净瓶 + 降魔杵 + 九环锡杖
    - 理由: 托塔天王镇压之宝

注：人参果为特殊掉落物品，不可合成

---

## 武器攻击逻辑实现

所有武器类继承自 `Weapon` 基类，实现以下核心方法：

### 核心接口

```typescript
abstract class Weapon {
  protected scene: Phaser.Scene;
  protected player: Player;
  public level: number;          // 当前等级 (1-5)
  public damage: number;          // 基础伤害
  public coolDown: number;        // 冷却时间（毫秒）

  // 主更新循环
  public update(time: number, enemies: Enemy[]): void;

  // 发射/触发武器攻击
  protected abstract fire(enemies: Enemy[]): void;

  // 升级效果
  protected abstract applyUpgrade(): void;
}
```

### 攻击类型分类

#### 1. 弹幕型（Projectile）

- **金箍棒**: 追踪最近敌人
- **火尖枪**: 直线火焰弹
- **冰魄银针**: 多方向散射

实现特点：

- 使用 `Phaser.Physics.Arcade.Group` 管理弹幕池
- 设置速度和方向
- 碰撞检测和生命周期管理

#### 2. 环绕型（Orbital）

- **避火罩**: 旋转护盾
- **风火轮**: 环绕火焰轮

实现特点：

- 持续跟随玩家位置
- 圆周运动轨迹
- 接触伤害判定

#### 3. 范围型（AOE）

- **定风珠**: 风暴AOE
- **降魔杵**: 地面冲击波
- **芭蕉扇**: 巨大扇风

实现特点：

- 大范围伤害检测
- 击退效果
- 视觉特效强化

#### 4. 链式型（Chain）

- **雷公凿**: 雷电链
- **金绳索**: 束缚链接

实现特点：

- 多目标连锁
- 传递伤害衰减
- 状态效果（减速、晕眩）

#### 5. 特殊型（Special）

- **玉净瓶**: 吸收+爆发
- **紫金铃**: 音波震慑
- **牛魔双角**: 冲锋穿透
- **人参果**: 治疗+增益

实现特点：

- 独特机制
- 组合效果
- 高伤害高冷却

#### 6. 多重攻击型（Multi-Strike）

- **三尖两刃刀**: 三叉/五叉斩击
- **月牙铲**: 回旋镖双重打击
- **七星剑**: 多剑环绕

实现特点：

- 多次命中机会
- 覆盖多个方向
- 持续或返回攻击

#### 7. 控制型（Control）

- **九环锡杖**: 音波眩晕
- **混铁棍**: 击退控场
- **混天绫**: 鞭打减速
- **幌金绳**: 强力束缚

实现特点：

- 群体控制
- 减速或击退
- 区域封锁

#### 8. 吸收型（Absorption）

- **紫金葫芦**: 吸引敌人
- **玉净瓶**: 吸收爆发

实现特点：

- 吸引机制
- 延迟爆发
- 聚集敌人

#### 9. 增益型（Buff）

- **照妖镜**: 暴击增强
- **人参果**: 治疗恢复

实现特点：

- 提升属性
- 辅助效果
- 战略价值

### 升级系统

每个武器可升级 5 次，每次升级效果：

- 增加基础伤害
- 减少冷却时间
- 解锁特殊效果（穿透、分裂、追踪等）

示例（金箍棒）：

```typescript
protected applyUpgrade(): void {
  this.damage += 5;                              // 伤害+5
  this.coolDown = Math.max(300, this.coolDown - 100); // 冷却-100ms
  if (this.level >= 3) this.piercing = 2;       // 3级：穿透2个
  if (this.level >= 5) this.piercing = 3;       // 5级：穿透3个
}
```

---

## 游戏内使用

### 武器管理器

`WeaponManager` 类负责：

- 管理玩家拥有的所有武器
- 每帧更新所有武器逻辑
- 提供武器升级选项
- 处理武器合成

### 武器映射

```typescript
export const WEAPON_MAP: Record<WeaponType, WeaponClass> = {
  golden_staff: GoldenStaff,
  fire_lance: FireLance,
  wind_tamer: WindTamer,
  three_pointed_blade: ThreePointedBlade,
  nine_ring_staff: NineRingStaff,
  crescent_blade: CrescentBlade,
  iron_cudgel: IronCudgel,
  seven_star_sword: SevenStarSword,
  ginseng_fruit: GinsengFruit,
  // ... 所有武器类
};
```

### 获取方式

1. **角色初始武器**: 每个角色自带一个初始武器
2. **击杀奖励**: 击杀一定数量敌人后选择新武器
3. **武器升级**: 升级现有武器
4. **合成系统**: 通过配方合成传说/史诗武器
5. **特殊掉落**: 人参果等特殊物品作为稀有掉落

---

## 平衡性设计

### 武器品质平衡

- **Common**: 基础伤害，简单机制
- **Rare**: 中等伤害，添加特殊效果
- **Epic**: 高伤害，强力范围/控制
- **Legendary**: 极高伤害，复杂机制，需要合成

### DPS 理论值（满级）

1. 定海神针: ~27.5 DPS (55×1000/2000) [最高单次伤害]
2. 如意金箍棒: ~62.5 DPS (50×1000/800) [最高DPS]
3. 三尖两刃刀: ~38.2 DPS (42×1000/1100) [多目标]
4. 乾坤圈: ~22.2 DPS (40×1000/1800) [双程伤害]
5. 芭蕉扇: ~15 DPS (45×1000/3000) [巨大范围]
6. 紫金葫芦: ~10 DPS (35×1000/3500) [控制+爆发]
7. 照妖镜: ~7.2 DPS (18×1000/2500) [暴击增强]
8. 人参果: 治疗型，提供生存能力

注：实际DPS会因武器特性（穿透、范围、控制等）而有显著差异

### 合成价值

合成武器通常比组件更强：

- 更高基础伤害
- 更好的攻击机制
- 稀有品质提升
- 视觉效果更炫酷

---

## 扩展建议

### 已实现的所有扩展武器 ✅

所有文档中建议的武器现已全部实现：

**第一批扩展武器（6种）：**

1. **三尖两刃刀** ✅ - 二郎神专属，三叉/五叉斩击
2. **九环锡杖** ✅ - 唐僧/沙僧，音波眩晕控制
3. **月牙铲** ✅ - 沙僧原版武器，回旋镖攻击
4. **混铁棍** ✅ - 牛魔王重武器，范围击退
5. **七星剑** ✅ - 道家剑器，环绕剑阵
6. **人参果** ✅ - 特殊恢复型"武器"，治疗+增益

**第二批扩展武器（6种）：**

1. **乾坤圈** ✅ - 哪吒神器，飞出攻击后自动返回
2. **混天绫** ✅ - 哪吒法宝，束缚和鞭打攻击
3. **紫金葫芦** ✅ - 金角银角法宝，吸收敌人
4. **幌金绳** ✅ - 太上老君法宝，强力束缚
5. **照妖镜** ✅ - 识破弱点，增加暴击
6. **定海神针** ✅ - 金箍棒终极形态，范围横扫

**第三批未来扩展武器（6种）：**

1. **八卦炉** ✅ - 太上老君炼丹炉，持续灼烧DoT伤害
2. **盘龙杖** ✅ - 观音座下神兵，龙卷风暴吸引
3. **七宝妙树** ✅ - 准提道人法宝，七色光芒净化
4. **斩仙飞刀** ✅ - 陆压道人神器，锁定追踪必杀
5. **金刚琢** ✅ - 太上老君法宝，破甲神器
6. **玲珑宝塔** ✅ - 托塔天王李靖宝塔，镇压禁锢

### 武器协同效果

考虑添加武器组合效果：

- 火尖枪 + 风火轮 = 火焰伤害提升 30%
- 金箍棒 + 如意金箍棒 + 定海神针 = 棍法大师，攻速提升 30%
- 定风珠 + 芭蕉扇 = 风暴威力增强，范围+50%
- 三尖两刃刀 + 七星剑 = 剑刃共鸣，暴击率+15%
- 九环锡杖 + 降魔杵 = 佛门金刚，护甲+10
- 月牙铲 + 混铁棍 = 重武器大师，击退距离+50%
- 人参果 + 任意武器 = 仙气护体，生命恢复速度+5/秒
- 乾坤圈 + 混天绫 + 风火轮 = 哪吒三宝，全属性+10%
- 金绳索 + 幌金绳 = 束缚精通，控制时间+50%
- 紫金葫芦 + 玉净瓶 = 吸收大师，伤害+25%
- 照妖镜 + 任意攻击武器 = 识破弱点，暴击伤害+30%

---

## 武器特性总结

### 物理攻击型

- 金箍棒、如意金箍棒、定海神针、三尖两刃刀、双刃刀、月牙铲、乾坤圈

### 元素攻击型

- 火尖枪（火）、冰魄银针（冰）、雷公凿（雷）、定风珠（风）

### 魔法攻击型

- 紫金铃、玉净瓶、九环锡杖、七星剑、紫金葫芦

### 力量攻击型

- 降魔杵、牛魔双角、混铁棍、芭蕉扇

### 控制型

- 金绳索、九环锡杖、混铁棍、芭蕉扇、混天绫、幌金绳

### 辅助型

- 避火罩（防御）、风火轮（机动）、人参果（治疗）、照妖镜（暴击）

### 特殊机制型

- 紫金葫芦（吸收）、乾坤圈（返回）、定海神针（横扫）、照妖镜（弱点）

#### 9. 持续灼烧型（DoT）

- **八卦炉**: 范围火焰，持续灼烧伤害

实现特点：

- 多点火焰柱
- 持续伤害每0.5秒
- 5-7秒持续时间

#### 10. 风暴型（Vortex）

- **盘龙杖**: 龙卷风吸引效果

实现特点：

- 生成龙卷风旋涡
- 拉扯敌人向中心
- 持续3秒伤害

#### 11. 净化型（Purify）

- **七宝妙树**: 七色光芒扫射

实现特点：

- 多方向光束扫射
- 大范围净化
- 击退效果

#### 12. 锁定型（Lock-on）

- **斩仙飞刀**: 锁定必杀

实现特点：

- 锁定最强敌人
- 智能追踪
- 必中高伤

#### 13. 破甲型（Armor Break）

- **金刚琢**: 无视防御

实现特点：

- 50%-100%破甲
- 弹幕攻击
- 等级提升破甲效果

#### 14. 镇压型（Imprison）

- **玲珑宝塔**: 地面镇压禁锢

实现特点：

- 地面生成宝塔
- 完全禁锢移动
- 持续4-5.5秒

---

## 技术实现文件

- **配置文件**: `/src/constant/rewards.ts` - 武器数据和合成配方（33种武器）
- **类型定义**: `/src/types/reward.ts` - 武器类型定义（33种武器类型）
- **实现文件**: `/src/game/weapon.ts` - 所有武器类实现（33个武器类 + 协同系统）
- **角色配置**: `/src/constant/characters.ts` - 角色初始武器
- **文档**: `/WEAPON_SYSTEM.md` - 武器系统完整说明

### 实现统计

- ✅ **33种武器**：15种基础 + 6种扩展 + 6种高级扩展 + 6种未来扩展
- ✅ **25个合成配方**：8个基础 + 5个扩展 + 6个高级扩展 + 6个未来扩展
- ✅ **14种攻击类型**：弹幕、环绕、范围、链式、特殊、多重、控制、吸收、增益、DoT、风暴、净化、锁定、破甲、镇压
- ✅ **4个品质等级**：Common、Rare、Epic、Legendary
- ✅ **所有武器类已实现**：包含完整攻击逻辑和升级系统
- ✅ **武器协同系统**：11种协同效果，自动检测和应用加成

---

## 武器协同效果系统

武器协同系统允许玩家同时装备特定武器组合时获得额外加成。系统会自动检测玩家拥有的武器，并激活相应的协同效果。

### 协同效果列表

1. **烈焰之势**
   - 条件: 火尖枪 + 风火轮
   - 效果: 火焰伤害提升 30%
   - 适用: 火属性武器伤害增强

2. **棍法大师**
   - 条件: 金箍棒 + 如意金箍棒 + 定海神针
   - 效果: 攻速提升 30%
   - 适用: 棍类武器攻击速度大幅增加

3. **风暴之力**
   - 条件: 定风珠 + 芭蕉扇
   - 效果: 攻击范围+50%
   - 适用: 风属性AOE攻击增强

4. **剑刃共鸣**
   - 条件: 三尖两刃刀 + 七星剑
   - 效果: 暴击率+15%
   - 适用: 提高爆发能力

5. **佛门金刚**
   - 条件: 九环锡杖 + 降魔杵
   - 效果: 护甲+10
   - 适用: 增加生存能力

6. **重武器大师**
   - 条件: 月牙铲 + 混铁棍
   - 效果: 击退距离+50%
   - 适用: 增强控制效果

7. **仙气护体**
   - 条件: 人参果 + 任意武器
   - 效果: 生命恢复速度+5/秒
   - 适用: 持续战斗能力

8. **哪吒三宝**
   - 条件: 乾坤圈 + 混天绫 + 风火轮
   - 效果: 全属性+10%
   - 适用: 全面提升战斗力

9. **束缚精通**
   - 条件: 金绳索 + 幌金绳
   - 效果: 控制时间+50%
   - 适用: 控制型武器增强

10. **吸收大师**
    - 条件: 紫金葫芦 + 玉净瓶
    - 效果: 伤害+25%
    - 适用: 吸收型武器伤害提升

11. **识破弱点**
    - 条件: 照妖镜 + 任意攻击武器
    - 效果: 暴击伤害+30%
    - 适用: 提高暴击输出

### 协同系统实现

`WeaponSynergyManager` 类负责管理所有协同效果：

```typescript
export class WeaponSynergyManager {
  // 检查并激活协同效果
  public checkSynergies(weapons: Weapon[]): WeaponSynergyBonus[]

  // 获取各类加成
  public getDamageBonus(): number
  public getAttackSpeedBonus(): number
  public getRangeBonus(): number
  public getCritRateBonus(): number
  public getCritDamageBonus(): number
  public getArmorBonus(): number
  public getHealthRegenBonus(): number
  public getControlDurationBonus(): number

  // 获取激活的协同列表
  public getActiveSynergies(): WeaponSynergyBonus[]
}
```

### 使用方式

在 `GameScene` 中集成协同系统：

```typescript
// 创建协同管理器
const synergyManager = new WeaponSynergyManager();

// 每次获得新武器后检查协同
const activeSynergies = synergyManager.checkSynergies(weaponManager.weapons);

// 应用加成
const damageBonus = synergyManager.getDamageBonus();
const attackSpeedBonus = synergyManager.getAttackSpeedBonus();

// 将加成应用到玩家属性
player.damage *= (1 + damageBonus);
player.attackSpeed *= (1 - attackSpeedBonus); // 注意：攻速越小越快
```

### 特殊协同说明

- **仙气护体** 和 **识破弱点** 为"任意武器"协同，只需要拥有对应的主要武器（人参果/照妖镜）即可激活
- **哪吒三宝** 需要同时装备3件武器才能激活，效果非常强大
- **棍法大师** 同样需要3件棍类武器，是最强的攻速加成

---

_本文档基于《黑神话：悟空》游戏和《西游记》原著设定编写_
_最后更新：添加6种未来扩展武器、实现武器协同效果系统_
